/* cabo roxo longo, direita
cinza longo, meio direita
roxo curto, meio esquerda
cinza curto, esquerda
amarelo, frente-*/

#include <Servo.h>

Servo servoEsquerda;
Servo servoDireita;

#define velEsq 100
#define velDir 80
#define velParar 90

///////////////////////

#define sensorF A1 
#define sensorEsq A3 
#define sensorDir A4 
#define sensorMesq A5 
#define sensorMdir A2 

//Ordem:  esquerda, meioesquerda, frente, meiodireita, direita
int sensoresMax[5] = {580, 340, 480, 420, 450}; // valores de cada sensor no branco

int sensoresMin[5] = {430, 100, 225, 100, 120}; //valores de cada sensor no preto

int mediaSensores[5] = {0, 0, 0, 0, 0};

int pinosSensores[5] = {A3, A5, A1, A2, A4};

int valorF = 0;
int valorEsq = 0;
int valorDir = 0;
int valorMesq = 0;
int valorMdir = 0;

#define d 1000

void setup(){
//definindo os tcrt como sa√≠das.
  for(int i = 0; i<5; i++){
    pinMode (pinosSensores[i], INPUT);
  }

  servoEsquerda.attach(3);
  servoDireita.attach(6);

  Serial.begin(9600);
}


void loop(){
  media(0); media(1); media(2); media(3); media(4);

  if (analogRead(pinosSensores[0]) > mediaSensores[0] ){valorEsq = 0;} else{valorEsq = 1;}

  if (analogRead(pinosSensores[1]) > mediaSensores[1] ){valorMesq = 0;} else {valorMesq = 1;}
    
  if (analogRead(pinosSensores[2]) > mediaSensores[2] ){valorF = 0;} else {valorF = 1;}
    
  if (analogRead(pinosSensores[3]) > mediaSensores[3] ){valorMdir = 0;} else {valorMdir = 1;}
    
  if (analogRead(pinosSensores[4]) > mediaSensores[4] ){valorDir = 0;} else {valorDir = 1;}

  Serial.print(valorEsq); Serial.print(" // ");
  Serial.print(valorMesq); Serial.print(" // ");
  Serial.print(valorF); Serial.print(" // ");
  Serial.print(valorMdir); Serial.print(" // ");
  Serial.print(valorDir); Serial.print(" // ");

  Serial.println();

  if((valorEsq == 0 && valorMesq == 1 &&  valorMdir == 0 && valorDir == 0) ||
    (valorEsq == 1 && valorMesq == 0 && valorF == 0 && valorMdir == 0 && valorDir == 0)) {
    Serial.println("ESQUERDA");
    esquerda();
  }

    else if((valorEsq == 0 && valorMesq == 0 && valorMdir == 1 && valorDir == 0) ||
           (valorEsq == 0 && valorMesq == 0 && valorF == 0 &&  valorMdir == 0 && valorDir == 1)) {
      Serial.println("DIREITA");
      direita();
    }

  else if((valorEsq == 0 && valorMesq == 1 && valorF == 0 && valorMdir == 1 && valorDir == 1)||
          (valorEsq == 0 && valorMesq == 0 && valorF == 0 && valorMdir == 1 && valorDir == 1)||
          (valorEsq == 0 && valorMesq == 1 && valorF == 0 && valorMdir == 0 && valorDir == 1)){
      direita();
    }
  
  else if((valorEsq == 1 && valorMesq == 1 && valorF == 0 && valorMdir == 1 && valorDir == 0) || 
         (valorEsq == 1 && valorMesq == 1 && valorF == 0 && valorMdir == 0 && valorDir == 0) ||
         (valorEsq == 1 && valorMesq == 0 && valorF == 0 && valorMdir == 1 && valorDir == 0)){
      esquerda();
            
    }

  else{Serial.println("FRENTE");
  frente();
  }
}

void media(int x){
  mediaSensores[x] = (sensoresMax[x] + sensoresMin[x])/2;
}

////////////////////
void parar(){
  servoEsquerda.write(velParar);
  servoDireita.write(velParar);
}

void frente(){
  servoEsquerda.write(velEsq);
  servoDireita.write(velDir);
}

void esquerda(){
  servoEsquerda.write(velDir);
  servoDireita.write(velDir);
}
  
void direita(){
  servoEsquerda.write(velEsq);
  servoDireita.write(velEsq);
}

// void novg_esquerda(){
//     while (analogRead(pinosSensores[0]) < mediaSensores[0]){
//       frente();
//     }
//     while(analogRead(pinosSensores[2]) > mediaSensores[2]){
//     esquerda();
//     }
// }

// void novg_direita(){
//     while (analogRead(pinosSensores[4]) < mediaSensores[4]){
//       frente();
//      }
//     while(analogRead(pinosSensores[2]) > mediaSensores[2] ){
//     direita();
//     }
// }

// void t(){}
// void encruzilhada(){}
